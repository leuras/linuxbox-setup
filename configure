#!/bin/zsh

# oh-my-zsh
ZSH=${ZSH:-"${HOME}/.oh-my-zsh"}
ZSH_CUSTOM=${ZSH_CUSTOM:-"${ZSH}/custom"}

if [[ ! -d "${ZSH}" ]]; then
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
fi;

# oh-my-zsh > theme
SPACESHIP_HOME="${ZSH_CUSTOM}/themes/spaceship-prompt"

if [[ ! -d "${SPACESHIP_HOME}" ]]; then
    SPACESHIP_REMOTE="https://github.com/spaceship-prompt/spaceship-prompt.git"
    
    git clone --depth=1 "${SPACESHIP_REMOTE}" "${SPACESHIP_HOME}"
    ln -s "${SPACESHIP_HOME}/spaceship.zsh-theme" "$ZSH_CUSTOM/themes/spaceship.zsh-theme"
    sed -i 's/ZSH_THEME=\".\+\"/ZSH_THEME="spaceship"/' "${HOME}/.zshrc"
fi;

# oh-my-zsh > plugins
sed -i 's/plugins=\(.\+\)/plugins=(git fzf virtualenv)/' "${HOME}/.zshrc"

# apply shell changes
source "${HOME}/.zshrc"
